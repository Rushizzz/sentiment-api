<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Sentiment Analyzer</title>
    <style>
        body { font-family: sans-serif; max-width: 600px; margin: 2rem auto; padding: 0 1rem; }
        textarea { width: 100%; height: 100px; margin-bottom: 1rem; }
        button { padding: 0.5rem 1rem; cursor: pointer; background: #3b82f6; color: white; border: none; border-radius: 4px;}
        #result { margin-top: 1rem; font-weight: bold; padding: 1rem; border: 1px solid #ddd; }
    </style>
</head>
<body>
    <h1>Sentiment Analyzer üß†</h1>
    <textarea id="inputText" placeholder="Type how you are feeling..."></textarea>
    <button onclick="analyze()">Analyze Sentiment</button>
    <div id="result">Results will appear here...</div>

    <script>
        async function analyze() {
            const text = document.getElementById("inputText").value;
            const resultDiv = document.getElementById("result");
            resultDiv.innerText = "Analyzing...";

            // ‚ö†Ô∏è REPLACE THIS WITH YOUR ACTUAL RENDER URL ‚ö†Ô∏è
            const apiUrl = "https://sentiment-api-cicd.onrender.com";
            try {
                const response = await fetch(`${apiUrl}/predict`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ text: text })
                });
                
                if (!response.ok) throw new Error("Network response was not ok");
                
                const data = await response.json();
                // The API returns a list, so we take the first item [0]
                const label = data[0].label;
                const score = (data[0].score * 100).toFixed(2);
                
                resultDiv.innerHTML = `Sentiment: <strong>${label}</strong> <br> Confidence: ${score}%`;
                
            } catch (error) {
                console.error("Error:", error);
                resultDiv.innerText = "Error connecting to API (Check Console)";
            }
        }
    </script>
</body>
</html>
